doms4 <- remDr$findElements(using = "css selector", "#contents > div.cnt > div.cnt_section.mt50 > div > div > div:nth-child(5) > div > a.next2")
endPage <- unlist(sapply(doms4, function(x) {x$getElementAttribute('onclick')}))
endPage <- gsub("[^[:digit:]]", '', endPage)
if(page == endPage) break;
df <- data.Frame(goodsname, goodsprice)
}
cat(length(goodsname), "개의 상품 추출\n")
write.csv(df, "gs25_twotoone.csv")
library(RSelenium)
remDr <- remoteDriver(remoteServerAddr = "localhost" , port = 4445, browserName = "chrome")
remDr$open()
remDr$navigate("http://gs25.gsretail.com/gscvs/ko/products/event-goods")
Sys.sleep(1)
TtO <- remDr$findElements(using = "css selector", "#TWO_TO_ONE")
remDr$executeScript("arguments[0].click();", TtO)
goodsname <- NULL
goodsprice <- NULL
repeat{
# 상품명
doms1 <- remDr$findElements(using = "css selector", "#contents > div.cnt > div.cnt_section.mt50 > div > div > div > ul > li > div > p.tit")
goodsname_v <- sapply(doms1, function(x) {x$getElementText()})
goodsname <- append(goodsname, unlist(goodsname_v))
goodsname <- gsub("[[:space:]]", "", goodsname)
# 가격
doms2 <- remDr$findElements(using = "css selector", "#contents > div.cnt > div.cnt_section.mt50 > div > div > div > ul > li > div > p.price > span")
goodsprice_v <- sapply(doms2, function(x) {x$getElementText()})
goodsprice <- append(goodsprice, unlist(goodsprice_v))
# 페이지 이동
pageLink <- remDr$findElements(using = "css selector", "#contents > div.cnt > div.cnt_section.mt50 > div > div > div:nth-child(5) > div > a.next")
remDr$executeScript("arguments[0].click();", pageLink)
Sys.sleep(2)
# 마지막 페이지 체크
doms3 <- remDr$findElements(using = "css selector", "#contents > div.cnt > div.cnt_section.mt50 > div > div > div:nth-child(5) > div > span > a.on")
page <- unlist(sapply(doms3, function(x) {x$getElementText()}))
doms4 <- remDr$findElements(using = "css selector", "#contents > div.cnt > div.cnt_section.mt50 > div > div > div:nth-child(5) > div > a.next2")
endPage <- unlist(sapply(doms4, function(x) {x$getElementAttribute('onclick')}))
endPage <- gsub("[^[:digit:]]", '', endPage)
if(page == endPage) break;
df <- data.frame(goodsname, goodsprice)
}
cat(length(goodsname), "개의 상품 추출\n")
write.csv(df, "gs25_twotoone.csv")
library(RSelenium)
remDr <- remoteDriver(remoteServerAddr = "localhost" , port = 4445, browserName = "chrome")
remDr$open()
remDr$navigate("http://gs25.gsretail.com/gscvs/ko/products/event-goods")
Sys.sleep(1)
TtO <- remDr$findElements(using = "css selector", "#TWO_TO_ONE")
remDr$executeScript("arguments[0].click();", TtO)
goodsname <- NULL
goodsprice <- NULL
doms1 <- remDr$findElements(using = "css selector", "#contents > div.cnt > div.cnt_section.mt50 > div > div > div > ul > li > div > p.tit")
goodsname_v <- sapply(doms1, function(x) {x$getElementText()})
goodsname <- append(goodsname, unlist(goodsname_v))
goodsname <- gsub("[[:space:]]", "", goodsname)
goodsname
goodsname <- goodsname[9:16]
goodsname
doms1 <- remDr$findElements(using = "css selector", "#contents > div.cnt > div.cnt_section.mt50 > div > div > div > ul > li > div > p.tit")
goodsname_v <- sapply(doms1, function(x) {x$getElementText()})
goodsname <- append(goodsname, unlist(goodsname_v))
goodsname <- goodsname[9:16]
doms2 <- remDr$findElements(using = "css selector", "#contents > div.cnt > div.cnt_section.mt50 > div > div > div > ul > li > div > p.price > span")
goodsprice_v <- sapply(doms2, function(x) {x$getElementText()})
goodsprice <- append(goodsprice, unlist(goodsprice_v))
goodsprice <- goodsprice[9:16]
goodsprice <- gsub("[^[:digit:]]", "", goodsprice)
df <- data.frame(goodsname, goodsprice)
View(df)
doms1 <- remDr$findElements(using = "css selector", "#contents > div.cnt > div.cnt_section.mt50 > div > div > div > ul > li > div > p.tit")
goodsname_v <- sapply(doms1, function(x) {x$getElementText()})
goodsname <- append(goodsname, unlist(goodsname_v))
goodsname <- goodsname[9:16]
goodsname <- goodsname[9:16]
goodsname
library(RSelenium)
remDr <- remoteDriver(remoteServerAddr = "localhost" , port = 4445, browserName = "chrome")
remDr$open()
remDr$navigate("http://gs25.gsretail.com/gscvs/ko/products/event-goods")
Sys.sleep(1)
TtO <- remDr$findElements(using = "css selector", "#TWO_TO_ONE")
remDr$executeScript("arguments[0].click();", TtO)
goodsname <- NULL
goodsprice <- NULL
doms1 <- remDr$findElements(using = "css selector", "#contents > div.cnt > div.cnt_section.mt50 > div > div > div > ul > li > div > p.tit")
goodsname_v <- sapply(doms1, function(x) {x$getElementText()})
goodsname <- append(goodsname, unlist(goodsname_v))
goodsname
goodsname <- goodsname[9:16]
goodsname
doms2 <- remDr$findElements(using = "css selector", "#contents > div.cnt > div.cnt_section.mt50 > div > div > div > ul > li > div > p.price > span")
goodsprice_v <- sapply(doms2, function(x) {x$getElementText()})
goodsprice <- append(goodsprice, unlist(goodsprice_v))
goodsprice <- goodsprice[9:16]
goodsprice <- gsub("[^[:digit:]]", "", goodsprice)
df <- data.frame(goodsname, goodsprice); View(df)
library(RSelenium)
remDr <- remoteDriver(remoteServerAddr = "localhost" , port = 4445, browserName = "chrome")
remDr$open()
remDr$navigate("http://gs25.gsretail.com/gscvs/ko/products/event-goods")
Sys.sleep(1)
TtO <- remDr$findElements(using = "css selector", "#TWO_TO_ONE")
remDr$executeScript("arguments[0].click();", TtO)
goodsname <- NULL
goodsprice <- NULL
repeat{
# 상품명
doms1 <- remDr$findElements(using = "css selector", "#contents > div.cnt > div.cnt_section.mt50 > div > div > div > ul > li > div > p.tit")
goodsname_v <- sapply(doms1, function(x) {x$getElementText()})
goodsname <- append(goodsname, unlist(goodsname_v))
goodsname <- goodsname[9:16]
# 가격
doms2 <- remDr$findElements(using = "css selector", "#contents > div.cnt > div.cnt_section.mt50 > div > div > div > ul > li > div > p.price > span")
goodsprice_v <- sapply(doms2, function(x) {x$getElementText()})
goodsprice <- append(goodsprice, unlist(goodsprice_v))
goodsprice <- goodsprice[9:16]
goodsprice <- gsub("[^[:digit:]]", "", goodsprice)
# 페이지 이동
pageLink <- remDr$findElements(using = "css selector", "#contents > div.cnt > div.cnt_section.mt50 > div > div > div:nth-child(5) > div > a.next")
remDr$executeScript("arguments[0].click();", pageLink)
Sys.sleep(1)
df <- data.frame(goodsname, goodsprice); View(df)
# 마지막 페이지 체크
doms3 <- remDr$findElements(using = "css selector", "#contents > div.cnt > div.cnt_section.mt50 > div > div > div:nth-child(5) > div > span > a.on")
page <- unlist(sapply(doms3, function(x) {x$getElementText()}))
doms4 <- remDr$findElements(using = "css selector", "#contents > div.cnt > div.cnt_section.mt50 > div > div > div:nth-child(5) > div > a.next2")
endPage <- unlist(sapply(doms4, function(x) {x$getElementAttribute('onclick')}))
endPage <- gsub("[^[:digit:]]", '', endPage)
if(page == endPage) break;
}
cat(length(goodsname), "개의 상품 추출\n")
write.csv(df, "gs25_twotoone.csv")
library(RSelenium)
remDr <- remoteDriver(remoteServerAddr = "localhost" , port = 4445, browserName = "chrome")
remDr$open()
remDr$navigate("http://gs25.gsretail.com/gscvs/ko/products/event-goods")
Sys.sleep(1)
TtO <- remDr$findElements(using = "css selector", "#TWO_TO_ONE")
remDr$executeScript("arguments[0].click();", TtO)
goodsname <- NULL
goodsprice <- NULL
repeat{
# 상품명
doms1 <- remDr$findElements(using = "css selector", "#contents > div.cnt > div.cnt_section.mt50 > div > div > div > ul > li > div > p.tit")
goodsname_v <- sapply(doms1, function(x) {x$getElementText()})
goodsname <- append(goodsname, unlist(goodsname_v))
goodsname <- goodsname[9:16]
# 가격
doms2 <- remDr$findElements(using = "css selector", "#contents > div.cnt > div.cnt_section.mt50 > div > div > div > ul > li > div > p.price > span")
goodsprice_v <- sapply(doms2, function(x) {x$getElementText()})
goodsprice <- append(goodsprice, unlist(goodsprice_v))
goodsprice <- goodsprice[9:16]
goodsprice <- gsub("[^[:digit:]]", "", goodsprice)
df <- data.frame(goodsname, goodsprice)
# 마지막 페이지 체크
doms3 <- remDr$findElements(using = "css selector", "#contents > div.cnt > div.cnt_section.mt50 > div > div > div:nth-child(5) > div > span > a.on")
page <- unlist(sapply(doms3, function(x) {x$getElementText()}))
doms4 <- remDr$findElements(using = "css selector", "#contents > div.cnt > div.cnt_section.mt50 > div > div > div:nth-child(5) > div > a.next2")
endPage <- unlist(sapply(doms4, function(x) {x$getElementAttribute('onclick')}))
endPage <- gsub("[^[:digit:]]", '', endPage)
if(page == endPage) break;
# 페이지 이동
pageLink <- remDr$findElements(using = "css selector", "#contents > div.cnt > div.cnt_section.mt50 > div > div > div:nth-child(5) > div > a.next")
remDr$executeScript("arguments[0].click();", pageLink)
Sys.sleep(1)
}
cat(length(goodsname), "개의 상품 추출\n")
write.csv(df, "gs25_twotoone.csv")
goodsname <- NULL
goodsprice <- NULL
doms1 <- remDr$findElements(using = "css selector", "#contents > div.cnt > div.cnt_section.mt50 > div > div > div > ul > li > div > p.tit")
goodsname_v <- sapply(doms1, function(x) {x$getElementText()})
goodsname <- append(goodsname, unlist(goodsname_v))
goodsname
goodsname <- append(goodsname, goodsname[9:16])
goodsname
name <- NULL
goodsname <- NULL
price <- NULL
goodsprice <- NULL
doms1 <- remDr$findElements(using = "css selector", "#contents > div.cnt > div.cnt_section.mt50 > div > div > div > ul > li > div > p.tit")
goodsname_v <- sapply(doms1, function(x) {x$getElementText()})
name <- unlist(goodsname_v)
name
name <- NULL
goodsname <- NULL
price <- NULL
goodsprice <- NULL
doms1 <- remDr$findElements(using = "css selector", "#contents > div.cnt > div.cnt_section.mt50 > div > div > div > ul > li > div > p.tit")
goodsname_v <- sapply(doms1, function(x) {x$getElementText()})
name <- unlist(goodsname_v)
goodsname <- append(goodsname, name[9:16])
goodsname
doms2 <- remDr$findElements(using = "css selector", "#contents > div.cnt > div.cnt_section.mt50 > div > div > div > ul > li > div > p.price > span")
goodsprice_v <- sapply(doms2, function(x) {x$getElementText()})
price <- unlist(goodsprice_v)
price <- gsub("[^[:digit:]]", "", price)
price
goodsprice <- append(goodsprice, price[9:16])
goodsprice
library(RSelenium)
remDr <- remoteDriver(remoteServerAddr = "localhost" , port = 4445, browserName = "chrome")
remDr$open()
remDr$navigate("http://gs25.gsretail.com/gscvs/ko/products/event-goods")
Sys.sleep(1)
TtO <- remDr$findElements(using = "css selector", "#TWO_TO_ONE")
remDr$executeScript("arguments[0].click();", TtO)
name <- NULL
goodsname <- NULL
price <- NULL
goodsprice <- NULL
repeat{
# 상품명
doms1 <- remDr$findElements(using = "css selector", "#contents > div.cnt > div.cnt_section.mt50 > div > div > div > ul > li > div > p.tit")
goodsname_v <- sapply(doms1, function(x) {x$getElementText()})
name <- unlist(goodsname_v)
goodsname <- append(goodsname, name[9:16])
# 가격
doms2 <- remDr$findElements(using = "css selector", "#contents > div.cnt > div.cnt_section.mt50 > div > div > div > ul > li > div > p.price > span")
goodsprice_v <- sapply(doms2, function(x) {x$getElementText()})
price <- unlist(goodsprice_v)
price <- gsub("[^[:digit:]]", "", price)
goodsprice <- append(goodsprice, price[9:16])
df <- data.frame(goodsname, goodsprice)
# 마지막 페이지 체크
doms3 <- remDr$findElements(using = "css selector", "#contents > div.cnt > div.cnt_section.mt50 > div > div > div:nth-child(5) > div > span > a.on")
page <- unlist(sapply(doms3, function(x) {x$getElementText()}))
doms4 <- remDr$findElements(using = "css selector", "#contents > div.cnt > div.cnt_section.mt50 > div > div > div:nth-child(5) > div > a.next2")
endPage <- unlist(sapply(doms4, function(x) {x$getElementAttribute('onclick')}))
endPage <- gsub("[^[:digit:]]", '', endPage)
if(page == endPage) break;
# 페이지 이동
pageLink <- remDr$findElements(using = "css selector", "#contents > div.cnt > div.cnt_section.mt50 > div > div > div:nth-child(5) > div > a.next")
remDr$executeScript("arguments[0].click();", pageLink)
Sys.sleep(1)
}
cat(length(goodsname), "개의 상품 추출\n")
write.csv(df, "gs25_twotoone.csv")
remDr <- remoteDriver(remoteServerAddr = "localhost" , port = 4445, browserName = "chrome")
remDr$open()
remDr$navigate("http://gs25.gsretail.com/gscvs/ko/products/event-goods")
Sys.sleep(1)
TtO <- remDr$findElements(using = "css selector", "#TWO_TO_ONE")
remDr$executeScript("arguments[0].click();", TtO)
name <- NULL
goodsname <- NULL
price <- NULL
goodsprice <- NULL
doms1 <- remDr$findElements(using = "css selector", "#contents > div.cnt > div.cnt_section.mt50 > div > div > div > ul > li > div > p.tit")
goodsname_v <- sapply(doms1, function(x) {x$getElementText()})
doms1 <- remDr$findElements(using = "css selector", "#contents > div.cnt > div.cnt_section.mt50 > div > div > div > ul > li > div > p.tit")
goodsname_v <- sapply(doms1, function(x) {x$getElementText()})
goodsname <- append(goodsname, unlist(goodsname_v))
goodsname
doms2 <- remDr$findElements(using = "css selector", "#contents > div.cnt > div.cnt_section.mt50 > div > div > div > ul > li > div > p.price > span")
goodsprice_v <- sapply(doms2, function(x) {x$getElementText()})
doms2 <- remDr$findElements(using = "css selector", "#contents > div.cnt > div.cnt_section.mt50 > div > div > div > ul > li > div > p.price > span")
goodsprice_v <- sapply(doms2, function(x) {x$getElementText()})
doms2 <- remDr$findElements(using = "css selector", "#contents > div.cnt > div.cnt_section.mt50 > div > div > div > ul > li > div > p.price > span")
goodsprice_v <- sapply(doms2, function(x) {x$getElementText()})
price <- unlist(goodsprice_v)
price <- gsub("[^[:digit:]]", "", unlist(goodsprice_v))
goodsprice <- append(goodsprice, price)
goodsprice
df <- data.frame(goodsname, goodsprice)
df
df <- na.omit(df)
df
df <- data.frame(goodsname, goodsprice)
df <- df %>% filter(!is.na(df))
library()
df <- data.frame(goodsname, goodsprice)
df
df <- na.omit(df)
df
is.na(df)
is.na(goodsname)
goodsname
doms1 <- remDr$findElements(using = "css selector", "#contents > div.cnt > div.cnt_section.mt50 > div > div > div > ul > li > div > p.tit")
goodsname_v <- sapply(doms1, function(x) {x$getElementText()})
name <- unlist(goodsname_v)
name
name <- gsub('"', "",name)
name
name <- gsub('"', NA,name)
name
name <- unlist(goodsname_v)
name
name <- gsub('["]', NA, name)
name
name <- gsub('["]', "", name)
name
is.na(goodsname)
word <- "JAVA javascript Aa 가나다 AAaAaA123 %^&*"
gsub(" ", "@", word);
sub(" ", "@", word)
length(goodsname[1])
length(goodsname[2])
length(goodsname[8])
goodsname
is.numeric(price)
doms2 <- remDr$findElements(using = "css selector", "#contents > div.cnt > div.cnt_section.mt50 > div > div > div > ul > li > div > p.price > span")
goodsprice_v <- sapply(doms2, function(x) {x$getElementText()})
price <- unlist(goodsprice_v)
price <- gsub("[^[:digit:]]", "", unlist(goodsprice_v))
goodsprice <- append(goodsprice, price)
goodsprice
price
is.numeric(price[1])
is.numeric(price[9])
df
is.na(df)
str(df)
length(df[1])
length(df[8])
length(df[8])
remDr <- remoteDriver(remoteServerAddr = "localhost" , port = 4445, browserName = "chrome")
remDr$open()
remDr$navigate("http://gs25.gsretail.com/gscvs/ko/products/event-goods")
Sys.sleep(1)
TtO <- remDr$findElements(using = "css selector", "#TWO_TO_ONE")
remDr$executeScript("arguments[0].click();", TtO)
name <- NULL
goodsname <- NULL
price <- NULL
goodsprice <- NULL
doms1 <- remDr$findElements(using = "css selector", "#contents > div.cnt > div.cnt_section.mt50 > div > div > div > ul > li > div > p.tit")
goodsname_v <- sapply(doms1, function(x) {x$getElementText()})
goodsname <- append(goodsname, unlist(goodsname_v))
doms2 <- remDr$findElements(using = "css selector", "#contents > div.cnt > div.cnt_section.mt50 > div > div > div > ul > li > div > p.price > span")
goodsprice_v <- sapply(doms2, function(x) {x$getElementText()})
price <- gsub("[^[:digit:]]", "", unlist(goodsprice_v))
goodsprice <- append(goodsprice, price)
df1 <- data.frame(goodsname, goodsprice)
for(i in 1:length(df1)){
if(length[i] != 1){
df <- append(df, df1)
}
}
for(i in 1:length(df1)){
if(length(df1[i]) != 1){
df <- append(df, df1)
}
}
df
length(df1[1])
df1 <- data.frame(goodsname, goodsprice)
df1
for(i in 1:length(df1)){
if(length(df1[i]) != 1){
df <- append(df, df1[i])
}
}
df
df1[1]
df1[1,]
df1 <- data.frame(goodsname, goodsprice)
df1
for(i in 1:length(df1)){
if(length(df1[i]) != 1){
df <- append(df, df1[1,])
}
}
df1 <- data.frame(goodsname, goodsprice)
df1
for(i in 1:length(df1)){
if(length(df1[i]) != 1){
df <- append(df, df1[i,])
}
}
df
length(df1[i,])
length(df1[9,])
length(df1[1,])
df1[1,]
is.numeric(df$goodsprice)
goodsprice
df$goodsprice[9]
is.numeric(df$goodsprice[9])
is.integer(df$goodsprice[9])
(df$goodsprice[9])
is.nan(df$goodsprice[9])
is.null(df$goodsprice[1])
df$goodsprice[1]
is.na(df$goodsprice[1])
is.character(df$goodsprice[1])
is.complex(df$goodsprice[1])
is.complex(df$goodsprice[9])
is.null(goodsprice[9])
is.null(goodsprice)
is.na(goodsprice)
is.null(goodsprice)
is.null(goodsprice[1])
is.null(goodsprice[10])
library(RSelenium)
remDr <- remoteDriver(remoteServerAddr = "localhost" , port = 4445, browserName = "chrome")
remDr$open()
remDr$navigate("http://gs25.gsretail.com/gscvs/ko/products/event-goods")
Sys.sleep(1)
TtO <- remDr$findElements(using = "css selector", "#TWO_TO_ONE")
remDr$executeScript("arguments[0].click();", TtO)
name <- NULL
goodsname <- NULL
price <- NULL
goodsprice <- NULL
repeat{
# 상품명
doms1 <- remDr$findElements(using = "css selector", "#contents > div.cnt > div.cnt_section.mt50 > div > div > div > ul > li > div > p.tit")
goodsname_v <- sapply(doms1, function(x) {x$getElementText()})
name <- unlist(goodsname_v)
goodsname <- append(goodsname, name[9:16])
# 가격
doms2 <- remDr$findElements(using = "css selector", "#contents > div.cnt > div.cnt_section.mt50 > div > div > div > ul > li > div > p.price > span")
goodsprice_v <- sapply(doms2, function(x) {x$getElementText()})
price <- unlist(goodsprice_v)
price <- gsub("[^[:digit:]]", "", price)
goodsprice <- append(goodsprice, price[9:16])
df <- data.frame(goodsname, goodsprice)
# 마지막 페이지 체크
doms3 <- remDr$findElements(using = "css selector", "#contents > div.cnt > div.cnt_section.mt50 > div > div > div:nth-child(5) > div > span > a.on")
page <- unlist(sapply(doms3, function(x) {x$getElementText()}))
doms4 <- remDr$findElements(using = "css selector", "#contents > div.cnt > div.cnt_section.mt50 > div > div > div:nth-child(5) > div > a.next2")
endPage <- unlist(sapply(doms4, function(x) {x$getElementAttribute('onclick')}))
endPage <- gsub("[^[:digit:]]", '', endPage)
if(page == endPage) break;
# 페이지 이동
pageLink <- remDr$findElements(using = "css selector", "#contents > div.cnt > div.cnt_section.mt50 > div > div > div:nth-child(5) > div > a.next")
remDr$executeScript("arguments[0].click();", pageLink)
Sys.sleep(1)
}
cat(length(goodsname), "개의 상품 추출\n")
write.csv(df, "gs25_twotoone.csv")
remDr <- remoteDriver(remoteServerAddr = "localhost", port = 4445, browserName = "chrome")
remDr$open()
remDr$navigate("http://www.yes24.com/24/goods/40936880")
repl_v = NULL
endFlag <- FALSE
page <- 3
repeat {
for(index in 3:7) {
fullContentLinkCSS <- paste("#infoset_reviewContentList > div:nth-child(",index,") > div.reviewInfoBot.crop > a", sep='')
fullContentLink<-remDr$findElements(using='css selector',  fullContentLinkCSS)
if (length(fullContentLink) == 0) {
cat("종료\n")
endFlag <- TRUE
break
}
remDr$executeScript("arguments[0].click();",fullContentLink);
Sys.sleep(1)
fullContentCSS <- paste("#infoset_reviewContentList > div:nth-child(",index,") > div.reviewInfoBot.origin > div.review_cont > p", sep='')
fullContent<-remDr$findElements(using='css selector', fullContentCSS)
repl <-sapply(fullContent,function(x){x$getElementText()})
print(repl)
cat("---------------------\n")
repl_v <- c(repl_v, unlist(repl))
}
if(endFlag)
break;
if(page == 10){
page <- 3
nextPageCSS <- "#infoset_reviewContentList > div.review_sort.sortTop > div.review_sortLft > div > a.bgYUI.next"
}
else{
page <- page+1;
nextPageCSS <- paste("#infoset_reviewContentList > div.review_sort.sortBot > div.review_sortLft > div > a:nth-child(",page,")",sep="")
}
remDr$executeScript("scrollTo(0, 0)", args = list(webElem))
nextPageLink<-remDr$findElements(using='css selector',nextPageCSS)
remDr$executeScript("arguments[0].click();",nextPageLink);
#sapply(nextPageLink,function(x){x$clickElement()})
Sys.sleep(3)
print(page)
}
write(repl_v, "yes24.txt")
remDr <- remoteDriver(remoteServerAddr = "localhost", port=4445, browserName="chrome")
remDr$open()
site <- paste("https://www.istarbucks.co.kr/store/store_map.do?disp=locale")
remDr$navigate(site)
btn1Css <- "#container > div > form > fieldset > div > section > article.find_store_cont > article > article:nth-child(4) > div.loca_step1 > div.loca_step1_cont > ul > li:nth-child(1) > a"
btn1Page <- remDr$findElements(using='css',btn1Css)
sapply(btn1Page,function(x){x$clickElement()})
btn2Css <- "#mCSB_2_container > ul > li:nth-child(1) > a"
btn2Page <- remDr$findElements(using='css',btn2Css)
sapply(btn2Page,function(x){x$clickElement()})
index <- 0
starbucks <- NULL
total <- sapply(remDr$findElements(using='css',"#container > div > form > fieldset > div > section > article.find_store_cont > article > article:nth-child(4) > div.loca_step3 > div.result_num_wrap > span"),function(x){x$getElementText()})
repeat{
index <- index + 1
print(index)
storeCss <- paste0("#mCSB_3_container > ul > li:nth-child(",index,")")
storePage <- remDr$findElements(using='css',storeCss)
if(length(storePage) == 0)
break
storeContent <- sapply(storePage,function(x){x$getElementText()})
#스타벅스 정보 추출
#strsplit(storeContent, split="\n")
storeList <- strsplit(unlist(storeContent), split="\n")
shopname <- storeList[[1]][1]
addr <- storeList[[1]][2]
addr <- gsub(",", "", addr)
telephone <- storeList[[1]][3]
#스타벅스 위도 경도 추출
lat <- sapply(storePage,function(x){x$getElementAttribute("data-lat")})
lng <- sapply(storePage,function(x){x$getElementAttribute("data-long")})
#병합
starbucks <- rbind(starbucks ,cbind(shopname, addr, telephone, lat, lng))
#스크롤 다운
if(index %% 3 == 0 && index != total)
remDr$executeScript("var dom=document.querySelectorAll('#mCSB_3_container > ul > li')[arguments[0]]; dom.scrollIntoView();", list(index))
}
write.csv(starbucks, "starbucks.csv")
